<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Prompt Veo 3</title>
    <script>
      // On page load or when changing themes, best to add inline in `head` to avoid FOUC
      if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }

      // Apply scrollbar theme class based on initial theme
      function applyInitialScrollbarTheme() {
        const generatedPromptDiv = document.getElementById('generatedPrompt');
        if (generatedPromptDiv) {
          if (document.documentElement.classList.contains('dark')) {
            generatedPromptDiv.classList.add('dark-mode-scrollbar');
          } else {
            generatedPromptDiv.classList.remove('dark-mode-scrollbar');
          }
        }
      }
      // Ensure this runs after DOM is available but before full load if possible,
      // or at least early in DOMContentLoaded.
      // However, generatedPromptDiv might not be available yet if this script is too high in <head>.
      // Moving this to DOMContentLoaded is safer.
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/custom.css">
    <script>
        tailwind.config = {
            darkMode: 'class', // Add or update this line
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#1E40AF',
                        accent: '#60A5FA',
                        dark: '#1F2937',
                        light: '#F3F4F6',
                        'neon-green': '#39FF14',
                        'gradient-blue-start': '#00C6FF',
                        'gradient-blue-end': '#0072FF',
                        'calm-green': '#34D399',
                        'gradient-calm-blue-start': '#3B82F6',
                        'gradient-calm-blue-end': '#1D4ED8',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="font-sans dark:bg-gray-900 dark:text-gray-200">
    <div class="container mx-auto px-4 py-12">
        <div class="flex justify-end mb-4"> <!-- Wrapper for alignment -->
            <button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
                <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 10.607a1 1 0 010-1.414l.707-.707a1 1 0 111.414 1.414l-.707.707a1 1 0 01-1.414 0zM10 18a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
            </button>
        </div>
        <div class="text-center mb-12 animate-fade-in">
            <h1 class="text-4xl sm:text-5xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-green-400">Generator Prompt Video Veo 3</h1>
            <p class="text-gray-600 text-lg">Buat prompt video yang menakjubkan dengan mudah</p>
        </div>

        <!-- AMSTAM Advertisement Banner -->
        <div class="max-w-7xl mx-auto mb-8">
            <a href="https://amstream.live" target="_blank" class="block bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 sm:p-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
                <div class="flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="text-xl sm:text-2xl font-bold mb-2">Mau Livestreaming 24 Jam Non-Stop Tanpa Kuota?</h2>
                        <p class="text-base sm:text-lg opacity-90">Kunjungi AMSTREAM sekarang, Klik Disini!</p>
                    </div>
                    <div class="ml-4">
                        <svg class="w-10 h-10 sm:w-12 sm:h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                </div>
            </a>
        </div>

        <!-- Main Content -->
        <div class="max-w-7xl mx-auto flex flex-col lg:flex-row gap-6">
            <!-- Form Section -->
            <div class="flex-1 card rounded-xl px-6 py-5 dark:bg-gray-800/70 dark:border-gray-700/80 dark:shadow-xl">
                <form id="promptForm" class="space-y-6">
                    <!-- 1. Detail Subjek dan Aksi -->
                    <div class="bg-light/50 p-3 sm:p-4 md:p-6 rounded-lg dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">1. Detail Subjek dan Aksi</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Subjek Utama -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Subjek Utama</label>
                                <input type="text" id="subject" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Contoh: Seorang atlet profesional yang sedang berlari di lintasan">
                            </div>

                            <!-- Karakteristik Subjek -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Karakteristik Subjek</label>
                                <select id="subjectCharacteristics" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <optgroup label="Pasar & Perdagangan">
                                        <option value="pedagang pasar tradisional yang ramah">Pedagang Pasar Tradisional yang Ramah</option>
                                        <option value="pedagang kaki lima yang gigih">Pedagang Kaki Lima yang Gigih</option>
                                        <option value="pedagang warung kopi yang ceria">Pedagang Warung Kopi yang Ceria</option>
                                        <option value="pedagang makanan tradisional yang bersemangat">Pedagang Makanan Tradisional yang Bersemangat</option>
                                        <option value="pedagang buah-buahan yang ramah">Pedagang Buah-buahan yang Ramah</option>
                                        <option value="pedagang ikan yang tangguh">Pedagang Ikan yang Tangguh</option>
                                        <option value="pedagang sayuran yang tekun">Pedagang Sayuran yang Tekun</option>
                                        <option value="pedagang bumbu dapur yang teliti">Pedagang Bumbu Dapur yang Teliti</option>
                                    </optgroup>
                                    <optgroup label="Pertanian & Perkebunan">
                                        <option value="petani padi yang tekun">Petani Padi yang Tekun</option>
                                        <option value="petani sayuran yang teliti">Petani Sayuran yang Teliti</option>
                                        <option value="petani buah-buahan yang sabar">Petani Buah-buahan yang Sabar</option>
                                        <option value="petani kopi yang berdedikasi">Petani Kopi yang Berdedikasi</option>
                                        <option value="petani teh yang telaten">Petani Teh yang Telaten</option>
                                        <option value="petani rempah yang cermat">Petani Rempah yang Cermat</option>
                                        <option value="petani organik yang inovatif">Petani Organik yang Inovatif</option>
                                        <option value="petani hidroponik yang modern">Petani Hidroponik yang Modern</option>
                                    </optgroup>
                                    <optgroup label="Kerajinan & Seni Tradisional">
                                        <option value="pengrajin batik yang teliti">Pengrajin Batik yang Teliti</option>
                                        <option value="pengrajin ukir kayu yang sabar">Pengrajin Ukir Kayu yang Sabar</option>
                                        <option value="pengrajin keramik yang cermat">Pengrajin Keramik yang Cermat</option>
                                        <option value="pengrajin perak yang telaten">Pengrajin Perak yang Telaten</option>
                                        <option value="pengrajin anyaman yang tekun">Pengrajin Anyaman yang Tekun</option>
                                        <option value="pengrajin tenun yang detail">Pengrajin Tenun yang Detail</option>
                                        <option value="pengrajin wayang yang kreatif">Pengrajin Wayang yang Kreatif</option>
                                        <option value="pengrajin songket yang teliti">Pengrajin Songket yang Teliti</option>
                                    </optgroup>
                                    <optgroup label="Kuliner & Makanan">
                                        <option value="juru masak tradisional yang handal">Juru Masak Tradisional yang Handal</option>
                                        <option value="pedagang sate yang ramah">Pedagang Sate yang Ramah</option>
                                        <option value="pedagang bakso yang ceria">Pedagang Bakso yang Ceria</option>
                                        <option value="pedagang nasi goreng yang lincah">Pedagang Nasi Goreng yang Lincah</option>
                                        <option value="pedagang martabak yang tekun">Pedagang Martabak yang Tekun</option>
                                        <option value="pedagang es cendol yang ramah">Pedagang Es Cendol yang Ramah</option>
                                        <option value="pedagang gorengan yang gigih">Pedagang Gorengan yang Gigih</option>
                                        <option value="pedagang rujak yang ceria">Pedagang Rujak yang Ceria</option>
                                    </optgroup>
                                    <optgroup label="Transportasi & Pengangkutan">
                                        <option value="tukang becak yang ramah">Tukang Becak yang Ramah</option>
                                        <option value="tukang ojek yang tangguh">Tukang Ojek yang Tangguh</option>
                                        <option value="tukang angkot yang ceria">Tukang Angkot yang Ceria</option>
                                        <option value="tukang delman yang sabar">Tukang Delman yang Sabar</option>
                                        <option value="tukang perahu yang berani">Tukang Perahu yang Berani</option>
                                        <option value="tukang gerobak yang gigih">Tukang Gerobak yang Gigih</option>
                                        <option value="tukang pikul yang kuat">Tukang Pikul yang Kuat</option>
                                        <option value="tukang dorong yang tekun">Tukang Dorong yang Tekun</option>
                                    </optgroup>
                                    <optgroup label="Pendidikan & Pengajaran">
                                        <option value="guru ngaji yang sabar">Guru Ngaji yang Sabar</option>
                                        <option value="guru mengaji yang telaten">Guru Mengaji yang Telaten</option>
                                        <option value="guru silat yang tegas">Guru Silat yang Tegas</option>
                                        <option value="guru tari tradisional yang luwes">Guru Tari Tradisional yang Luwes</option>
                                        <option value="guru gamelan yang teliti">Guru Gamelan yang Teliti</option>
                                        <option value="guru wayang yang bijaksana">Guru Wayang yang Bijaksana</option>
                                        <option value="guru batik yang telaten">Guru Batik yang Telaten</option>
                                        <option value="guru kerajinan yang kreatif">Guru Kerajinan yang Kreatif</option>
                                    </optgroup>
                                    <optgroup label="Kesehatan & Pengobatan">
                                        <option value="tabib tradisional yang bijaksana">Tabib Tradisional yang Bijaksana</option>
                                        <option value="dukun beranak yang sabar">Dukun Beranak yang Sabar</option>
                                        <option value="tukang pijat yang telaten">Tukang Pijat yang Telaten</option>
                                        <option value="tukang urut yang handal">Tukang Urut yang Handal</option>
                                        <option value="tukang bekam yang teliti">Tukang Bekam yang Teliti</option>
                                        <option value="tukang jamu yang cermat">Tukang Jamu yang Cermat</option>
                                        <option value="tukang akupuntur yang sabar">Tukang Akupuntur yang Sabar</option>
                                        <option value="tukang refleksi yang telaten">Tukang Refleksi yang Telaten</option>
                                    </optgroup>
                                    <optgroup label="Pertukangan & Konstruksi">
                                        <option value="tukang kayu yang teliti">Tukang Kayu yang Teliti</option>
                                        <option value="tukang batu yang kuat">Tukang Batu yang Kuat</option>
                                        <option value="tukang atap yang berani">Tukang Atap yang Berani</option>
                                        <option value="tukang listrik yang cermat">Tukang Listrik yang Cermat</option>
                                        <option value="tukang pipa yang telaten">Tukang Pipa yang Telaten</option>
                                        <option value="tukang cat yang teliti">Tukang Cat yang Teliti</option>
                                        <option value="tukang las yang tangguh">Tukang Las yang Tangguh</option>
                                        <option value="tukang ukir yang sabar">Tukang Ukir yang Sabar</option>
                                    </optgroup>
                                    <optgroup label="Perikanan & Kelautan">
                                        <option value="nelayan tradisional yang tangguh">Nelayan Tradisional yang Tangguh</option>
                                        <option value="nelayan jaring yang berani">Nelayan Jaring yang Berani</option>
                                        <option value="nelayan pancing yang sabar">Nelayan Pancing yang Sabar</option>
                                        <option value="pembudidaya ikan yang telaten">Pembudidaya Ikan yang Telaten</option>
                                        <option value="pembudidaya udang yang teliti">Pembudidaya Udang yang Teliti</option>
                                        <option value="pembudidaya rumput laut yang tekun">Pembudidaya Rumput Laut yang Tekun</option>
                                        <option value="pengolah hasil laut yang cermat">Pengolah Hasil Laut yang Cermat</option>
                                        <option value="pedagang hasil laut yang ramah">Pedagang Hasil Laut yang Ramah</option>
                                    </optgroup>
                                    <optgroup label="Seni & Hiburan">
                                        <option value="dalang wayang yang bijaksana">Dalang Wayang yang Bijaksana</option>
                                        <option value="penari tradisional yang luwes">Penari Tradisional yang Luwes</option>
                                        <option value="pemain gamelan yang teliti">Pemain Gamelan yang Teliti</option>
                                        <option value="pemain angklung yang ceria">Pemain Angklung yang Ceria</option>
                                        <option value="pemain suling yang sabar">Pemain Suling yang Sabar</option>
                                        <option value="pemain kendang yang energik">Pemain Kendang yang Energik</option>
                                        <option value="pemain rebana yang bersemangat">Pemain Rebana yang Bersemangat</option>
                                        <option value="pemain kecapi yang tenang">Pemain Kecapi yang Tenang</option>
                                    </optgroup>
                                    <optgroup label="Pembawa Acara & Presenter">
                                        <option value="pembawa acara talkshow yang interaktif">Pembawa Acara Talkshow yang Interaktif</option>
                                        <option value="pembawa acara kuis yang energik">Pembawa Acara Kuis yang Energik</option>
                                        <option value="pembawa acara musik yang dinamis">Pembawa Acara Musik yang Dinamis</option>
                                        <option value="pembawa acara variety show yang ceria">Pembawa Acara Variety Show yang Ceria</option>
                                        <option value="pembawa acara reality show yang natural">Pembawa Acara Reality Show yang Natural</option>
                                        <option value="pembawa acara dokumenter yang informatif">Pembawa Acara Dokumenter yang Informatif</option>
                                        <option value="pembawa acara cooking show yang ramah">Pembawa Acara Cooking Show yang Ramah</option>
                                        <option value="pembawa acara travel show yang antusias">Pembawa Acara Travel Show yang Antusias</option>
                                        <option value="pembawa acara lifestyle yang elegan">Pembawa Acara Lifestyle yang Elegan</option>
                                        <option value="pembawa acara olahraga yang bersemangat">Pembawa Acara Olahraga yang Bersemangat</option>
                                        <option value="pembawa berita profesional yang tegas">Pembawa Berita Profesional yang Tegas</option>
                                        <option value="pembawa berita senior yang bijaksana">Pembawa Berita Senior yang Bijaksana</option>
                                        <option value="pembawa berita muda yang dinamis">Pembawa Berita Muda yang Dinamis</option>
                                        <option value="pembawa berita olahraga yang bersemangat">Pembawa Berita Olahraga yang Bersemangat</option>
                                        <option value="pembawa berita ekonomi yang cermat">Pembawa Berita Ekonomi yang Cermat</option>
                                        <option value="pembawa berita hiburan yang ceria">Pembawa Berita Hiburan yang Ceria</option>
                                        <option value="pembawa berita politik yang serius">Pembawa Berita Politik yang Serius</option>
                                        <option value="pembawa berita teknologi yang informatif">Pembawa Berita Teknologi yang Informatif</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Aksi Utama -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Aksi Utama</label>
                                <select id="mainAction" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <optgroup label="Aktivitas Pasar">
                                        <option value="berjualan dengan ramah">Berjualan dengan Ramah</option>
                                        <option value="menawar dengan cerdik">Menawar dengan Cerdik</option>
                                        <option value="mengatur dagangan dengan rapi">Mengatur Dagangan dengan Rapi</option>
                                        <option value="melayani pembeli dengan sopan">Melayani Pembeli dengan Sopan</option>
                                        <option value="memanggil pembeli dengan lantang">Memanggil Pembeli dengan Lantang</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Pertanian">
                                        <option value="mencangkul dengan tekun">Mencangkul dengan Tekun</option>
                                        <option value="menanam padi dengan telaten">Menanam Padi dengan Telaten</option>
                                        <option value="memetik hasil panen dengan ceria">Memetik Hasil Panen dengan Ceria</option>
                                        <option value="mengairi sawah dengan teliti">Mengairi Sawah dengan Teliti</option>
                                        <option value="merawat tanaman dengan sabar">Merawat Tanaman dengan Sabar</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Kerajinan">
                                        <option value="membatik dengan teliti">Membatik dengan Teliti</option>
                                        <option value="mengukir kayu dengan sabar">Mengukir Kayu dengan Sabar</option>
                                        <option value="menganyam dengan tekun">Menganyam dengan Tekun</option>
                                        <option value="menenun dengan telaten">Menenun dengan Telaten</option>
                                        <option value="membuat keramik dengan cermat">Membuat Keramik dengan Cermat</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Kuliner">
                                        <option value="memasak dengan semangat">Memasak dengan Semangat</option>
                                        <option value="mengaduk bumbu dengan teliti">Mengaduk Bumbu dengan Teliti</option>
                                        <option value="menggoreng dengan lincah">Menggoreng dengan Lincah</option>
                                        <option value="menyajikan makanan dengan rapi">Menyajikan Makanan dengan Rapi</option>
                                        <option value="membuat jamu dengan telaten">Membuat Jamu dengan Telaten</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Transportasi">
                                        <option value="mengayuh becak dengan gigih">Mengayuh Becak dengan Gigih</option>
                                        <option value="mengemudi ojek dengan tangguh">Mengemudi Ojek dengan Tangguh</option>
                                        <option value="mengemudi delman dengan sabar">Mengemudi Delman dengan Sabar</option>
                                        <option value="mengangkut barang dengan kuat">Mengangkut Barang dengan Kuat</option>
                                        <option value="mendorong gerobak dengan tekun">Mendorong Gerobak dengan Tekun</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Seni">
                                        <option value="mendalang wayang dengan bijaksana">Mendalang Wayang dengan Bijaksana</option>
                                        <option value="menari tradisional dengan luwes">Menari Tradisional dengan Luwes</option>
                                        <option value="memainkan gamelan dengan teliti">Memainkan Gamelan dengan Teliti</option>
                                        <option value="memainkan angklung dengan ceria">Memainkan Angklung dengan Ceria</option>
                                        <option value="menyanyi lagu daerah dengan merdu">Menyanyi Lagu Daerah dengan Merdu</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Pengobatan">
                                        <option value="mengobati dengan bijaksana">Mengobati dengan Bijaksana</option>
                                        <option value="memijat dengan telaten">Memijat dengan Telaten</option>
                                        <option value="membuat jamu dengan teliti">Membuat Jamu dengan Teliti</option>
                                        <option value="mengurut dengan handal">Mengurut dengan Handal</option>
                                        <option value="membekam dengan cermat">Membekam dengan Cermat</option>
                                    </optgroup>
                                    <optgroup label="Aktivitas Pembawa Acara">
                                        <option value="membawakan berita dengan profesional">Membawakan Berita dengan Profesional</option>
                                        <option value="mewawancarai narasumber dengan cerdas">Mewawancarai Narasumber dengan Cerdas</option>
                                        <option value="membawakan talkshow dengan interaktif">Membawakan Talkshow dengan Interaktif</option>
                                        <option value="membawakan kuis dengan energik">Membawakan Kuis dengan Energik</option>
                                        <option value="membawakan acara musik dengan dinamis">Membawakan Acara Musik dengan Dinamis</option>
                                        <option value="membawakan variety show dengan ceria">Membawakan Variety Show dengan Ceria</option>
                                        <option value="membawakan reality show dengan natural">Membawakan Reality Show dengan Natural</option>
                                        <option value="membawakan dokumenter dengan informatif">Membawakan Dokumenter dengan Informatif</option>
                                        <option value="membawakan cooking show dengan ramah">Membawakan Cooking Show dengan Ramah</option>
                                        <option value="membawakan travel show dengan antusias">Membawakan Travel Show dengan Antusias</option>
                                        <option value="membawakan lifestyle show dengan elegan">Membawakan Lifestyle Show dengan Elegan</option>
                                        <option value="membawakan acara olahraga dengan bersemangat">Membawakan Acara Olahraga dengan Bersemangat</option>
                                        <option value="membawakan breaking news dengan tegas">Membawakan Breaking News dengan Tegas</option>
                                        <option value="membawakan liputan langsung dengan tangkas">Membawakan Liputan Langsung dengan Tangkas</option>
                                        <option value="membawakan debat politik dengan bijaksana">Membawakan Debat Politik dengan Bijaksana</option>
                                        <option value="membawakan analisis ekonomi dengan cermat">Membawakan Analisis Ekonomi dengan Cermat</option>
                                        <option value="membawakan berita hiburan dengan ceria">Membawakan Berita Hiburan dengan Ceria</option>
                                        <option value="membawakan berita teknologi dengan informatif">Membawakan Berita Teknologi dengan Informatif</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Emosi -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Emosi</label>
                                <select id="emotion" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <optgroup label="Emosi Positif">
                                        <option value="ramah tamah">Ramah Tamah</option>
                                        <option value="sopan santun">Sopan Santun</option>
                                        <option value="ikhlas">Ikhlas</option>
                                        <option value="sabar">Sabar</option>
                                        <option value="gigih">Gigih</option>
                                    </optgroup>
                                    <optgroup label="Semangat">
                                        <option value="bersemangat">Bersemangat</option>
                                        <option value="penuh semangat">Penuh Semangat</option>
                                        <option value="bergairah">Bergairah</option>
                                        <option value="antusias">Antusias</option>
                                        <option value="bersemangat tinggi">Bersemangat Tinggi</option>
                                    </optgroup>
                                    <optgroup label="Ketenangan">
                                        <option value="tenang">Tenang</option>
                                        <option value="tenteram">Tenteram</option>
                                        <option value="damai">Damai</option>
                                        <option value="nyaman">Nyaman</option>
                                        <option value="tentram">Tentram</option>
                                    </optgroup>
                                    <optgroup label="Kebahagiaan">
                                        <option value="gembira">Gembira</option>
                                        <option value="ceria">Ceria</option>
                                        <option value="bahagia">Bahagia</option>
                                        <option value="riang">Riang</option>
                                        <option value="sukacita">Sukacita</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Lingkungan dan Atmosfer -->
                    <div class="bg-light/50 p-3 sm:p-4 md:p-6 rounded-lg dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">2. Lingkungan dan Atmosfer</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Lokasi -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Lokasi</label>
                                <select id="location" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <optgroup label="Pasar & Perdagangan">
                                        <option value="pasar tradisional yang ramai">Pasar Tradisional yang Ramai</option>
                                        <option value="pasar pagi yang sibuk">Pasar Pagi yang Sibuk</option>
                                        <option value="warung kopi yang nyaman">Warung Kopi yang Nyaman</option>
                                        <option value="kaki lima yang meriah">Kaki Lima yang Meriah</option>
                                        <option value="pasar malam yang gemerlap">Pasar Malam yang Gemerlap</option>
                                    </optgroup>
                                    <optgroup label="Pertanian & Perkebunan">
                                        <option value="sawah yang hijau">Sawah yang Hijau</option>
                                        <option value="kebun yang subur">Kebun yang Subur</option>
                                        <option value="ladang yang luas">Ladang yang Luas</option>
                                        <option value="perkebunan yang asri">Perkebunan yang Asri</option>
                                        <option value="kebun organik yang sejuk">Kebun Organik yang Sejuk</option>
                                    </optgroup>
                                    <optgroup label="Desa & Kampung">
                                        <option value="desa yang damai">Desa yang Damai</option>
                                        <option value="kampung yang asri">Kampung yang Asri</option>
                                        <option value="pedesaan yang sejuk">Pedesaan yang Sejuk</option>
                                        <option value="perkampungan yang ramai">Perkampungan yang Ramai</option>
                                        <option value="lingkungan yang rukun">Lingkungan yang Rukun</option>
                                    </optgroup>
                                    <optgroup label="Pesisir & Laut">
                                        <option value="pantai yang indah">Pantai yang Indah</option>
                                        <option value="pelabuhan yang ramai">Pelabuhan yang Ramai</option>
                                        <option value="pulau yang sepi">Pulau yang Sepi</option>
                                        <option value="pesisir yang tenang">Pesisir yang Tenang</option>
                                        <option value="teluk yang menawan">Teluk yang Menawan</option>
                                    </optgroup>
                                    <optgroup label="Kota & Perkotaan">
                                        <option value="kota yang ramai">Kota yang Ramai</option>
                                        <option value="perkotaan yang modern">Perkotaan yang Modern</option>
                                        <option value="pusat kota yang sibuk">Pusat Kota yang Sibuk</option>
                                        <option value="kawasan yang berkembang">Kawasan yang Berkembang</option>
                                        <option value="lingkungan yang dinamis">Lingkungan yang Dinamis</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Waktu -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Waktu</label>
                                <select id="time" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <optgroup label="Pagi">
                                        <option value="subuh yang sejuk">Subuh yang Sejuk</option>
                                        <option value="pagi yang cerah">Pagi yang Cerah</option>
                                        <option value="fajar yang menyejukkan">Fajar yang Menyejukkan</option>
                                        <option value="pagi buta yang dingin">Pagi Buta yang Dingin</option>
                                        <option value="matahari terbit yang indah">Matahari Terbit yang Indah</option>
                                    </optgroup>
                                    <optgroup label="Siang">
                                        <option value="siang yang terik">Siang yang Terik</option>
                                        <option value="tengah hari yang panas">Tengah Hari yang Panas</option>
                                        <option value="dzuhur yang terang">Dzuhur yang Terang</option>
                                        <option value="siang bolong yang terik">Siang Bolong yang Terik</option>
                                        <option value="ashar yang hangat">Ashar yang Hangat</option>
                                    </optgroup>
                                    <optgroup label="Sore">
                                        <option value="sore yang hangat">Sore yang Hangat</option>
                                        <option value="senja yang romantis">Senja yang Romantis</option>
                                        <option value="maghrib yang indah">Maghrib yang Indah</option>
                                        <option value="petang yang sejuk">Petang yang Sejuk</option>
                                        <option value="sore hari yang tenang">Sore Hari yang Tenang</option>
                                    </optgroup>
                                    <optgroup label="Malam">
                                        <option value="malam yang sejuk">Malam yang Sejuk</option>
                                        <option value="malam hari yang tenang">Malam Hari yang Tenang</option>
                                        <option value="isya yang damai">Isya yang Damai</option>
                                        <option value="tengah malam yang sunyi">Tengah Malam yang Sunyi</option>
                                        <option value="dini hari yang sepi">Dini Hari yang Sepi</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Cuaca -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Cuaca</label>
                                <select id="weather" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <optgroup label="Cerah">
                                        <option value="cerah berkilau">Cerah Berkilau</option>
                                        <option value="terang benderang">Terang Benderang</option>
                                        <option value="matahari bersinar terang">Matahari Bersinar Terang</option>
                                        <option value="langit biru jernih">Langit Biru Jernih</option>
                                        <option value="cuaca cerah ceria">Cuaca Cerah Ceria</option>
                                    </optgroup>
                                    <optgroup label="Hujan">
                                        <option value="hujan rintik-rintik">Hujan Rintik-rintik</option>
                                        <option value="hujan gerimis">Hujan Gerimis</option>
                                        <option value="hujan deras">Hujan Deras</option>
                                        <option value="hujan lebat">Hujan Lebat</option>
                                        <option value="hujan badai">Hujan Badai</option>
                                    </optgroup>
                                    <optgroup label="Berawan">
                                        <option value="berawan lembut">Berawan Lembut</option>
                                        <option value="mendung">Mendung</option>
                                        <option value="awan mendung">Awan Mendung</option>
                                        <option value="berawan tebal">Berawan Tebal</option>
                                        <option value="mendung gelap">Mendung Gelap</option>
                                    </optgroup>
                                    <optgroup label="Khusus">
                                        <option value="angin sepoi-sepoi">Angin Sepoi-sepoi</option>
                                        <option value="angin kencang">Angin Kencang</option>
                                        <option value="berkabut">Berkabut</option>
                                        <option value="embun pagi">Embun Pagi</option>
                                        <option value="udara sejuk">Udara Sejuk</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Musim -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Musim</label>
                                <select id="season" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <optgroup label="Musim Kemarau">
                                        <option value="kemarau yang terik">Kemarau yang Terik</option>
                                        <option value="musim kering">Musim Kering</option>
                                        <option value="panas terik">Panas Terik</option>
                                        <option value="kekeringan">Kekeringan</option>
                                        <option value="kemarau panjang">Kemarau Panjang</option>
                                    </optgroup>
                                    <optgroup label="Musim Hujan">
                                        <option value="hujan yang sejuk">Hujan yang Sejuk</option>
                                        <option value="musim penghujan">Musim Penghujan</option>
                                        <option value="hujan lebat">Hujan Lebat</option>
                                        <option value="musim basah">Musim Basah</option>
                                        <option value="hujan deras">Hujan Deras</option>
                                    </optgroup>
                                    <optgroup label="Peralihan">
                                        <option value="peralihan musim">Peralihan Musim</option>
                                        <option value="musim pancaroba">Musim Pancaroba</option>
                                        <option value="pergantian musim">Pergantian Musim</option>
                                        <option value="transisi musim">Transisi Musim</option>
                                        <option value="perubahan musim">Perubahan Musim</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Sinematografi -->
                    <div class="bg-light/50 p-3 sm:p-4 md:p-6 rounded-lg dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">3. Sinematografi</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- Gaya -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Gaya</label>
                                <select id="style" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="sinematik yang epik">Sinematik yang Epik</option>
                                    <option value="dokumenter yang mendalam">Dokumenter yang Mendalam</option>
                                    <option value="anime yang dinamis">Anime yang Dinamis</option>
                                    <option value="kartun yang ceria">Kartun yang Ceria</option>
                                    <option value="realistis yang natural">Realistis yang Natural</option>
                                    <option value="vintage yang klasik">Vintage yang Klasik</option>
                                    <option value="futuristik yang modern">Futuristik yang Modern</option>
                                    <option value="film noir yang misterius">Film Noir yang Misterius</option>
                                    <option value="komersial yang profesional">Komersial yang Profesional</option>
                                </select>
                            </div>

                            <!-- Pergerakan Kamera -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Pergerakan Kamera</label>
                                <select id="cameraMovement" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="statik yang stabil">Statik yang Stabil</option>
                                    <option value="panning yang halus">Panning yang Halus</option>
                                    <option value="dolly yang dinamis">Dolly yang Dinamis</option>
                                    <option value="tracking yang mengalir">Tracking yang Mengalir</option>
                                    <option value="drone yang spektakuler">Drone yang Spektakuler</option>
                                    <option value="crane yang elegan">Crane yang Elegan</option>
                                    <option value="steadicam yang stabil">Steadicam yang Stabil</option>
                                    <option value="handheld yang natural">Handheld yang Natural</option>
                                </select>
                            </div>

                            <!-- Sudut Kamera -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Sudut Kamera</label>
                                <select id="cameraAngle" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="setinggi mata yang natural">Setinggi Mata yang Natural</option>
                                    <option value="sudut rendah yang dramatis">Sudut Rendah yang Dramatis</option>
                                    <option value="sudut tinggi yang mengesankan">Sudut Tinggi yang Mengesankan</option>
                                    <option value="sudut mata burung yang spektakuler">Sudut Mata Burung yang Spektakuler</option>
                                    <option value="sudut belanda yang dinamis">Sudut Belanda yang Dinamis</option>
                                    <option value="dari balik bahu yang intim">Dari Balik Bahu yang Intim</option>
                                </select>
                            </div>

                            <!-- Panjang Fokus -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Panjang Fokus</label>
                                <select id="focalLength" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="lebar (24mm) yang luas">Lebar (24mm) yang Luas</option>
                                    <option value="medium (50mm) yang natural">Medium (50mm) yang Natural</option>
                                    <option value="telefoto (85mm) yang intim">Telefoto (85mm) yang Intim</option>
                                    <option value="ultra lebar (16mm) yang spektakuler">Ultra Lebar (16mm) yang Spektakuler</option>
                                    <option value="makro yang detail">Makro yang Detail</option>
                                </select>
                            </div>

                            <!-- Pencahayaan -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Pencahayaan</label>
                                <select id="lighting" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="alami yang natural">Alami yang Natural</option>
                                    <option value="dramatis yang intens">Dramatis yang Intens</option>
                                    <option value="lembut yang menenangkan">Lembut yang Menenangkan</option>
                                    <option value="cahaya latar yang elegan">Cahaya Latar yang Elegan</option>
                                    <option value="studio yang profesional">Studio yang Profesional</option>
                                    <option value="rendah yang misterius">Rendah yang Misterius</option>
                                    <option value="tinggi yang ceria">Tinggi yang Ceria</option>
                                    <option value="neon yang futuristik">Neon yang Futuristik</option>
                                </select>
                            </div>

                            <!-- Gradiasi Warna -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Gradiasi Warna</label>
                                <select id="colorGrading" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="alami yang natural">Alami yang Natural</option>
                                    <option value="hangat yang menyejukkan">Hangat yang Menyejukkan</option>
                                    <option value="dingin yang menenangkan">Dingin yang Menenangkan</option>
                                    <option value="vintage yang klasik">Vintage yang Klasik</option>
                                    <option value="kontras tinggi yang dramatis">Kontras Tinggi yang Dramatis</option>
                                    <option value="desaturasi yang elegan">Desaturasi yang Elegan</option>
                                    <option value="cerlang yang hidup">Cerlang yang Hidup</option>
                                    <option value="monokrom yang timeless">Monokrom yang Timeless</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Audio -->
                    <div class="bg-light/50 p-3 sm:p-4 md:p-6 rounded-lg dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">4. Audio</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Dialog -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Dialog</label>
                                <select id="dialog" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="none">Tanpa Dialog</option>
                                    <option value="narasi yang informatif">Narasi yang Informatif</option>
                                    <option value="dialog yang natural">Dialog yang Natural</option>
                                    <option value="monolog yang mendalam">Monolog yang Mendalam</option>
                                    <option value="wawancara yang profesional">Wawancara yang Profesional</option>
                                    <option value="voice over yang elegan">Voice Over yang Elegan</option>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customDialogInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Deskripsikan jenis dialog yang diinginkan...">
                                </div>
                            </div>

                            <!-- Karakter Dialog -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Karakter Dialog</label>
                                <select id="dialogCharacter" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="none">Tidak Ada</option>
                                    <optgroup label="Pembawa Berita">
                                        <option value="pembawa berita profesional yang tegas">Pembawa Berita Profesional yang Tegas</option>
                                        <option value="pembawa berita senior yang bijaksana">Pembawa Berita Senior yang Bijaksana</option>
                                        <option value="pembawa berita muda yang dinamis">Pembawa Berita Muda yang Dinamis</option>
                                        <option value="pembawa berita olahraga yang bersemangat">Pembawa Berita Olahraga yang Bersemangat</option>
                                        <option value="pembawa berita ekonomi yang cermat">Pembawa Berita Ekonomi yang Cermat</option>
                                        <option value="pembawa berita hiburan yang ceria">Pembawa Berita Hiburan yang Ceria</option>
                                        <option value="pembawa berita politik yang serius">Pembawa Berita Politik yang Serius</option>
                                        <option value="pembawa berita teknologi yang informatif">Pembawa Berita Teknologi yang Informatif</option>
                                    </optgroup>
                                    <optgroup label="Pembawa Acara TV">
                                        <option value="pembawa acara talkshow yang interaktif">Pembawa Acara Talkshow yang Interaktif</option>
                                        <option value="pembawa acara kuis yang energik">Pembawa Acara Kuis yang Energik</option>
                                        <option value="pembawa acara musik yang dinamis">Pembawa Acara Musik yang Dinamis</option>
                                        <option value="pembawa acara variety show yang ceria">Pembawa Acara Variety Show yang Ceria</option>
                                        <option value="pembawa acara reality show yang natural">Pembawa Acara Reality Show yang Natural</option>
                                        <option value="pembawa acara dokumenter yang informatif">Pembawa Acara Dokumenter yang Informatif</option>
                                        <option value="pembawa acara cooking show yang ramah">Pembawa Acara Cooking Show yang Ramah</option>
                                        <option value="pembawa acara travel show yang antusias">Pembawa Acara Travel Show yang Antusias</option>
                                        <option value="pembawa acara lifestyle yang elegan">Pembawa Acara Lifestyle yang Elegan</option>
                                        <option value="pembawa acara olahraga yang bersemangat">Pembawa Acara Olahraga yang Bersemangat</option>
                                    </optgroup>
                                    <optgroup label="Suara Pria">
                                        <option value="pria dewasa yang profesional">Pria Dewasa yang Profesional</option>
                                        <option value="pria muda yang energik">Pria Muda yang Energik</option>
                                        <option value="pria tua yang bijaksana">Pria Tua yang Bijaksana</option>
                                        <option value="anak laki-laki yang ceria">Anak Laki-laki yang Ceria</option>
                                    </optgroup>
                                    <optgroup label="Suara Wanita">
                                        <option value="wanita dewasa yang elegan">Wanita Dewasa yang Elegan</option>
                                        <option value="wanita muda yang dinamis">Wanita Muda yang Dinamis</option>
                                        <option value="wanita tua yang bijaksana">Wanita Tua yang Bijaksana</option>
                                        <option value="anak perempuan yang ceria">Anak Perempuan yang Ceria</option>
                                    </optgroup>
                                    <optgroup label="Karakter Khusus">
                                        <option value="robot yang mekanis">Robot yang Mekanis</option>
                                        <option value="alien yang misterius">Alien yang Misterius</option>
                                        <option value="monster yang menakutkan">Monster yang Menakutkan</option>
                                        <option value="makhluk fantasi yang ajaib">Makhluk Fantasi yang Ajaib</option>
                                    </optgroup>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customDialogCharacterInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Deskripsikan karakter suara yang diinginkan...">
                                </div>
                            </div>

                            <!-- Isi Dialog -->
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Isi Dialog</label>
                                <div id="dialogInputs" class="space-y-4">
                                    <div class="flex gap-4 items-start">
                                        <div class="w-1/4">
                                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dialog-character dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                                <option value="Karakter 1">Karakter 1</option>
                                                <option value="Karakter 2">Karakter 2</option>
                                                <option value="Karakter 3">Karakter 3</option>
                                                <option value="Narator">Narator</option>
                                                <option value="Pembawa Berita">Pembawa Berita</option>
                                                <option value="custom">Input Manual</option>
                                            </select>
                                        </div>
                                        <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Masukkan dialog...">
                                        <button type="button" class="text-red-500 hover:text-red-700" onclick="removeDialog(this)">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="flex gap-2 mt-2">
                                    <button type="button" onclick="addDialogInput()" class="text-calm-green hover:brightness-125 flex items-center gap-1">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                        Tambah Dialog
                                    </button>
                                    <button type="button" onclick="addDialogCharacter()" class="text-calm-green hover:brightness-125 flex items-center gap-1">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                        Tambah Karakter
                                    </button>
                                </div>
                            </div>

                            <!-- Suasana Suara -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Suasana Suara</label>
                                <select id="voiceMood" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="none">Tidak Ada</option>
                                    <optgroup label="Emosi">
                                        <option value="gembira yang ceria">Gembira yang Ceria</option>
                                        <option value="sedih yang mengharukan">Sedih yang Mengharukan</option>
                                        <option value="marah yang tegas">Marah yang Tegas</option>
                                        <option value="tenang yang menenangkan">Tenang yang Menenangkan</option>
                                    </optgroup>
                                    <optgroup label="Suasana">
                                        <option value="ramai yang dinamis">Ramai yang Dinamis</option>
                                        <option value="sepi yang misterius">Sepi yang Misterius</option>
                                        <option value="khidmat yang sakral">Khidmat yang Sakral</option>
                                        <option value="riuh yang meriah">Riuh yang Meriah</option>
                                    </optgroup>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customVoiceMoodInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Deskripsikan suasana suara yang diinginkan...">
                                </div>
                            </div>

                            <!-- Musik Latar -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Musik Latar</label>
                                <select id="backgroundMusic" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field mb-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="none">Tanpa Musik</option>
                                    <optgroup label="Genre">
                                        <option value="instrumental yang elegan">Instrumental yang Elegan</option>
                                        <option value="pop yang energik">Pop yang Energik</option>
                                        <option value="klasik yang megah">Klasik yang Megah</option>
                                        <option value="ambient yang menenangkan">Ambient yang Menenangkan</option>
                                        <option value="elektronik yang futuristik">Elektronik yang Futuristik</option>
                                        <option value="jazz yang sofistikated">Jazz yang Sofistikated</option>
                                        <option value="rock yang powerful">Rock yang Powerful</option>
                                    </optgroup>
                                    <optgroup label="Suasana">
                                        <option value="dramatis yang intens">Dramatis yang Intens</option>
                                        <option value="romantis yang lembut">Romantis yang Lembut</option>
                                        <option value="misterius yang mendalam">Misterius yang Mendalam</option>
                                        <option value="ceria yang ceria">Ceria yang Ceria</option>
                                    </optgroup>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customMusicInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Deskripsikan musik yang diinginkan...">
                                </div>
                            </div>

                            <!-- Efek Suara -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Efek Suara</label>
                                <select id="soundEffects" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field mb-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="none">Tanpa Efek</option>
                                    <optgroup label="Alam">
                                        <option value="hujan yang menyejukkan">Hujan yang Menyejukkan</option>
                                        <option value="angin yang sepoi-sepoi">Angin yang Sepoi-sepoi</option>
                                        <option value="ombak yang tenang">Ombak yang Tenang</option>
                                        <option value="burung yang berkicau">Burung yang Berkicau</option>
                                    </optgroup>
                                    <optgroup label="Perkotaan">
                                        <option value="keramaian kota yang dinamis">Keramaian Kota yang Dinamis</option>
                                        <option value="kendaraan yang lalu lalang">Kendaraan yang Lalu Lalang</option>
                                        <option value="keramaian pasar yang meriah">Keramaian Pasar yang Meriah</option>
                                        <option value="suara kereta yang megah">Suara Kereta yang Megah</option>
                                    </optgroup>
                                    <optgroup label="Atmosfer">
                                        <option value="ambient yang atmosferik">Ambient yang Atmosferik</option>
                                        <option value="foley yang realistis">Foley yang Realistis</option>
                                        <option value="atmosferik yang mendalam">Atmosferik yang Mendalam</option>
                                    </optgroup>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customSoundEffectsInput" class="hidden">
                                    <div id="soundEffectsInputs" class="space-y-2">
                                        <div class="flex gap-2">
                                            <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Deskripsikan efek suara...">
                                            <button type="button" class="text-red-500 hover:text-red-700" onclick="removeSoundEffect(this)">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    <button type="button" onclick="addSoundEffect()" class="mt-2 text-calm-green hover:brightness-125 flex items-center gap-1">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                        </svg>
                                        Tambah Efek Suara
                                    </button>
                                </div>
                            </div>

                            <!-- Volume -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Volume</label>
                                <select id="volume" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="rendah yang halus">Rendah yang Halus</option>
                                    <option value="sedang yang seimbang">Sedang yang Seimbang</option>
                                    <option value="tinggi yang powerful">Tinggi yang Powerful</option>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customVolumeInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Deskripsikan volume yang diinginkan...">
                                </div>
                            </div>

                            <!-- Background Music -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Background Music</label> <!-- This was a duplicate ID, assuming it's a typo and should be a new label or removed -->
                                <select id="backgroundMusic" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="none">No Background Music</option>
                                    <option value="dangdut koplo">Dangdut Koplo</option>
                                    <option value="ambient yang menenangkan">Ambient yang Menenangkan</option>
                                    <option value="orchestra yang megah">Orchestra yang Megah</option>
                                    <option value="electronic yang energik">Electronic yang Energik</option>
                                    <option value="custom">Input Manual</option>
                                </select>
                                <div id="customMusicInput" class="hidden mt-2">
                                    <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Deskripsikan jenis musik yang diinginkan...">
                                </div>
                            </div>

                            <!-- Audio Translation -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Audio Translation</label>
                                <select id="audioTranslation" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="none">No Translation</option>
                                    <option value="english">Translate to English (Keep Dialog Original)</option>
                                    <option value="full_english">Full English Translation</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 5. Parameter Teknis dan Tambahan -->
                    <div class="bg-light/50 p-3 sm:p-4 md:p-6 rounded-lg dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                        <h2 class="text-xl font-semibold text-dark mb-4 section-title">5. Parameter Teknis dan Tambahan</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Kualitas Video -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Kualitas Video</label>
                                <select id="videoQuality" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="standar yang jernih">Standar yang Jernih</option>
                                    <option value="hd yang tajam">HD yang Tajam</option>
                                    <option value="4k yang ultra tajam">4K yang Ultra Tajam</option>
                                    <option value="8k yang spektakuler">8K yang Spektakuler</option>
                                </select>
                            </div>

                            <!-- Detail Tambahan -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Detail Tambahan</label>
                                <textarea id="additionalDetails" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" rows="3" placeholder="Tambahkan detail tambahan atau persyaratan spesifik untuk meningkatkan kualitas video..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- 6. Format Output Prompt -->
                    <div class="bg-light/50 p-3 sm:p-4 md:p-6 rounded-lg dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                        <h2 class="text-xl font-semibold text-dark dark:text-gray-100 mb-4 section-title">6. Format Output Prompt</h2>
                        <div class="grid grid-cols-1 gap-6">
                            <div>
                                <label for="outputFormat" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Pilih Format Output</label>
                                <select id="outputFormat" name="outputFormat" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                    <option value="veo" selected>Default (Veo)</option>
                                    <option value="runway">RunwayML</option>
                                    <option value="midjourney">Midjourney</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Audio Mixing -->
                    <div class="md:col-span-2 bg-gray-50 p-2 sm:p-3 md:p-4 rounded-lg dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-medium text-gray-700 dark:text-gray-300">Pengaturan Audio Mixing</h3>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" id="showAudioMixing" class="form-checkbox h-5 w-5 text-calm-green rounded border-gray-300 focus:ring-calm-green transition-colors duration-200">
                                <span class="text-sm text-gray-600 dark:text-gray-300">Tampilkan Pengaturan</span>
                            </label>
                        </div>
                        <div id="audioMixingContent" class="hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Dialog Mix -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Volume Dialog</label>
                                    <div class="flex items-center gap-2">
                                        <input type="range" id="dialogVolume" min="0" max="100" value="80" class="w-full">
                                        <span id="dialogVolumeValue" class="text-sm text-gray-600 dark:text-gray-300">80%</span>
                                    </div>
                                </div>

                                <!-- Music Mix -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Volume Musik</label>
                                    <div class="flex items-center gap-2">
                                        <input type="range" id="musicVolume" min="0" max="100" value="60" class="w-full">
                                        <span id="musicVolumeValue" class="text-sm text-gray-600 dark:text-gray-300">60%</span>
                                    </div>
                                </div>

                                <!-- Effects Mix -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Volume Efek Suara</label>
                                    <div class="flex items-center gap-2">
                                        <input type="range" id="effectsVolume" min="0" max="100" value="40" class="w-full">
                                        <span id="effectsVolumeValue" class="text-sm text-gray-600 dark:text-gray-300">40%</span>
                                    </div>
                                </div>

                                <!-- Overall Mix -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Volume Keseluruhan</label>
                                    <div class="flex items-center gap-2">
                                        <input type="range" id="overallVolume" min="0" max="100" value="100" class="w-full">
                                        <span id="overallVolumeValue" class="text-sm text-gray-600 dark:text-gray-300">100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Audio Processing -->
                    <div class="md:col-span-2 bg-gray-50 p-2 sm:p-3 md:p-4 rounded-lg dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-medium text-gray-700 dark:text-gray-300">Pengolahan Audio</h3>
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" id="showAudioProcessing" class="form-checkbox h-5 w-5 text-calm-green rounded border-gray-300 focus:ring-calm-green transition-colors duration-200">
                                <span class="text-sm text-gray-600 dark:text-gray-300">Tampilkan Pengaturan</span>
                            </label>
                        </div>
                        <div id="audioProcessingContent" class="hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Equalizer -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Equalizer</label>
                                    <select id="equalizer" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                        <option value="none">Tanpa Equalizer</option>
                                        <option value="vocal boost">Vocal Boost</option>
                                        <option value="bass boost">Bass Boost</option>
                                        <option value="treble boost">Treble Boost</option>
                                        <option value="flat">Flat</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>

                                <!-- Compression -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Kompresi</label>
                                    <select id="compression" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                        <option value="none">Tanpa Kompresi</option>
                                        <option value="light">Ringan</option>
                                        <option value="medium">Sedang</option>
                                        <option value="heavy">Berat</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>

                                <!-- Reverb -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Reverb</label>
                                    <select id="reverb" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                        <option value="none">Tanpa Reverb</option>
                                        <option value="room">Room</option>
                                        <option value="hall">Hall</option>
                                        <option value="cathedral">Cathedral</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>

                                <!-- Spatial Audio -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Spatial Audio</label>
                                    <select id="spatialAudio" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                                        <option value="none">Tanpa Spatial Audio</option>
                                        <option value="stereo">Stereo</option>
                                        <option value="surround">Surround</option>
                                        <option value="3d">3D Audio</option>
                                        <option value="custom">Kustom</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="w-full text-white py-3 px-6 rounded-lg font-semibold shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5 bg-gradient-to-r from-gradient-calm-blue-start to-gradient-calm-blue-end">
                        Buat Prompt
                    </button>
                </form>
            </div>

            <!-- Output Section -->
            <div class="w-full lg:w-[500px] card rounded-xl px-6 py-5 lg:sticky lg:top-8 dark:bg-gray-800/70 dark:border-gray-700/80 dark:shadow-xl">
                <h2 class="text-xl font-semibold text-dark mb-4 section-title">Prompt yang Dihasilkan</h2>
                <div id="generatedPrompt" class="bg-light/50 p-3 sm:p-4 md:p-6 rounded-xl border border-gray-300 min-h-[180px] overflow-y-auto dark:bg-gray-700/60 dark:border dark:border-gray-600/30">
                    <p class="text-gray-500">Prompt yang Anda hasilkan akan muncul di sini...</p>
                </div>
                <button id="copyButton" class="mt-4 w-full btn-secondary text-dark dark:bg-gray-800 dark:text-calm-green dark:border-calm-green dark:hover:bg-calm-green dark:hover:text-gray-900 py-3 px-4 rounded-lg hidden font-semibold">
                    Salin ke Clipboard
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import PromptHandler from './promptHandler.js';

        // Initialize PromptHandler
        const promptHandler = new PromptHandler();
        promptHandler.initializeCopyButton();

        // Function to get element value
        function getElementValue(id, defaultValue = '') {
            const element = document.getElementById(id);
            return element ? element.value : defaultValue;
        }

        // Function to get custom input value
        function getCustomInputValue(selector, defaultValue = '') {
            const element = document.querySelector(selector);
            return element ? element.value : defaultValue;
        }

        // Function to update volume display
        function updateVolumeDisplay(inputId, displayId) {
            const input = document.getElementById(inputId);
            const display = document.getElementById(displayId);
            if (input && display) {
                display.textContent = input.value + '%';
            }
        }

        // Function to generate prompt
        async function generatePrompt() {
            try {
                // Get selected output format
                const outputFormatValue = getElementValue('outputFormat', 'veo');
                const outputFormatDropdown = document.getElementById('outputFormat');
                const selectedFormatText = outputFormatDropdown.options[outputFormatDropdown.selectedIndex].text;

                // Get all required values with fallbacks
                const subject = getElementValue('subject', '');
                const subjectCharacteristics = getElementValue('subjectCharacteristics', 'karakteristik subjek');
                const mainAction = getElementValue('mainAction', 'melakukan aksi');
                const emotion = getElementValue('emotion', 'dengan emosi');
                const location = getElementValue('location', '');
                const time = getElementValue('time', 'pada waktu');
                const weather = getElementValue('weather', 'dengan cuaca');
                const season = getElementValue('season', 'pada musim');
                const style = getElementValue('style', 'dengan gaya');
                const cameraMovement = getElementValue('cameraMovement', 'dengan pergerakan kamera');
                const cameraAngle = getElementValue('cameraAngle', 'dari sudut');
                const focalLength = getElementValue('focalLength', 'dengan lensa');
                const lighting = getElementValue('lighting', 'dengan pencahayaan');
                const colorGrading = getElementValue('colorGrading', 'dengan gradiasi warna');
                const backgroundMusic = getElementValue('backgroundMusic', 'none');
                const musicMood = getElementValue('musicMood', 'none');
                const soundEffects = getElementValue('soundEffects', 'none');
                const volume = getElementValue('volume', 'sedang yang seimbang');
                const videoQuality = getElementValue('videoQuality', 'standar yang jernih');
                const dialog = getElementValue('dialog', 'none');
                const dialogCharacter = getElementValue('dialogCharacter', 'none');
                const voiceMood = getElementValue('voiceMood', 'none');
                const additionalDetails = getElementValue('additionalDetails', '');

                // Get all dialog inputs with their characters
                const dialogInputs = Array.from(document.querySelectorAll('#dialogInputs .flex')).map(div => {
                    const character = div.querySelector('.dialog-character').value;
                    const text = div.querySelector('input').value.trim();
                    return text ? `"${text}"` : null;
                }).filter(Boolean);

                // Get custom inputs
                const customDialog = getCustomInputValue('#customDialogInput input');
                const customDialogCharacter = getCustomInputValue('#customDialogCharacterInput input');
                const customVoiceMood = getCustomInputValue('#customVoiceMoodInput input');
                const customMusic = getCustomInputValue('#customMusicInput input');
                const customVolume = getCustomInputValue('#customVolumeInput input');
                const customSoundEffects = Array.from(document.querySelectorAll('#soundEffectsInputs input'))
                    .map(input => input.value.trim())
                    .filter(value => value !== '');

                // Get audio processing values
                const dialogVolume = getElementValue('dialogVolume', '80');
                const musicVolume = getElementValue('musicVolume', '60');
                const effectsVolume = getElementValue('effectsVolume', '40');
                const overallVolume = getElementValue('overallVolume', '100');
                const equalizer = getElementValue('equalizer', 'none');
                const compression = getElementValue('compression', 'none');
                const reverb = getElementValue('reverb', 'none');
                const spatialAudio = getElementValue('spatialAudio', 'none');
                const audioTranslation = getElementValue('audioTranslation', 'none');

                let audioDescription = [];
                
                // Add dialog if present
                if (dialog !== 'none') {
                    let dialogText = '';
                    if (dialog === 'custom' && customDialog) {
                        dialogText = customDialog;
                    } else {
                        dialogText = dialog;
                    }

                    if (dialogCharacter !== 'none') {
                        dialogText += ` ${dialogCharacter === 'custom' && customDialogCharacter ? customDialogCharacter : dialogCharacter}`;
                    }

                    if (voiceMood !== 'none') {
                        dialogText += ` dengan suasana ${voiceMood === 'custom' && customVoiceMood ? customVoiceMood : voiceMood}`;
                    }

                    if (dialogInputs.length > 0) {
                        dialogText += `: [${dialogInputs.join(', ')}]`;
                    }

                    if (document.getElementById('showAudioMixing')?.checked) {
                        dialogText += ` (${dialogVolume}%)`;
                    }

                    // Add translation note if needed
                    if (audioTranslation === 'english') {
                        dialogText += ' (Keep original dialog)';
                    } else if (audioTranslation === 'full_english') {
                        dialogText += ' (Translate to English)';
                    }

                    audioDescription.push(dialogText);
                }
                
                // Add music if present
                if (backgroundMusic !== 'none') {
                    let musicText = 'Musik ';
                    if (backgroundMusic === 'custom' && customMusic) {
                        musicText += customMusic;
                    } else {
                        musicText += backgroundMusic;
                    }
                    if (musicMood !== 'none') {
                        musicText += ` dengan suasana ${musicMood === 'custom' && customMusicMood ? customMusicMood : musicMood}`;
                    }
                    if (document.getElementById('showAudioMixing')?.checked) {
                        musicText += ` (${musicVolume}%)`;
                    }
                    audioDescription.push(musicText);
                }
                
                // Add sound effects if present
                if (soundEffects !== 'none') {
                    let effectsText = '';
                    if (soundEffects === 'custom' && customSoundEffects.length > 0) {
                        effectsText = `efek suara: [${customSoundEffects.join(', ')}]`;
                    } else {
                        effectsText = `efek suara ${soundEffects}`;
                    }
                    if (document.getElementById('showAudioMixing')?.checked) {
                        effectsText += ` (${effectsVolume}%)`;
                    }
                    audioDescription.push(effectsText);
                }

                // Add audio processing details only if section is visible
                if (document.getElementById('showAudioProcessing')?.checked) {
                    let processingDetails = [];
                    if (equalizer !== 'none') {
                        processingDetails.push(`Equalizer: ${equalizer}`);
                    }
                    if (compression !== 'none') {
                        processingDetails.push(`Kompresi: ${compression}`);
                    }
                    if (reverb !== 'none') {
                        processingDetails.push(`Reverb: ${reverb}`);
                    }
                    if (spatialAudio !== 'none') {
                        processingDetails.push(`Spatial Audio: ${spatialAudio}`);
                    }

                    if (processingDetails.length > 0) {
                        audioDescription.push(`Pengolahan Audio: ${processingDetails.join(', ')}`);
                    }
                }

                // Combine all audio elements
                const volumeText = volume === 'custom' && customVolume ? customVolume : volume;
                let audioText = audioDescription.length > 0 
                    ? `Audio: ${audioDescription.join(', ')}${document.getElementById('showAudioMixing')?.checked ? ` (Master: ${overallVolume}%)` : ''}`
                    : 'Tanpa audio';

                // Build the prompt with all inputs
                // The prompt is assembled in several stages:
                // 1. Initial descriptive sentence: Style, Subject, Action, Emotion, Midjourney Keywords (translatable part), Environment.
                //    This part is built using an array join for better readability.
                // 2. Cinematography details.
                // 3. Audio details.
                // 4. Technical specifications.
                // 5. Additional user-provided details.
                // 6. Midjourney untranslatable suffix (appended last to both Indonesian and English versions).

                let descriptivePromptParts = [];
                
                // Fetch values for the descriptive part
                const styleVal = getElementValue('style', 'dengan gaya');
                const subjectVal = getElementValue('subject', '');
                const subjectCharacteristicsVal = getElementValue('subjectCharacteristics', 'karakteristik subjek');
                const mainActionVal = getElementValue('mainAction', '');
                const emotionVal = getElementValue('emotion', '');
                const outputFormatVal = getElementValue('outputFormat', 'veo'); // Renamed from outputFormatValue for clarity here
                const locationVal = getElementValue('location', '');
                const timeVal = getElementValue('time', '');
                const seasonVal = getElementValue('season', '');
                const weatherVal = getElementValue('weather', '');

                // Part 1.1: Style and Subject
                let subjectPartVal = subjectVal && subjectVal.trim() !== '' ? subjectVal : subjectCharacteristicsVal;
                descriptivePromptParts.push(`Buat video bergaya ${styleVal} tentang ${subjectPartVal}`);

                // Part 1.2: Action and Emotion
                let actionClause = '';
                if (mainActionVal && mainActionVal.trim() !== '') {
                    actionClause = `yang sedang ${mainActionVal}`;
                }

                let emotionClause = '';
                // Add emotion only if it's provided and not already part of the subject (to avoid redundancy).
                if (emotionVal && emotionVal.trim() !== '') {
                    const emotionRegex = new RegExp(`\\b${emotionVal.replace(/[-\/\^$*+?.()|[\]{}]/g, '\\$&')}\\b`, 'i');
                    if (typeof subjectPartVal === 'string' && !subjectPartVal.match(emotionRegex)) {
                        emotionClause = `dengan emosi ${emotionVal}`;
                    }
                }

                if (actionClause) {
                    descriptivePromptParts.push(actionClause);
                    if (emotionClause) {
                        descriptivePromptParts.push(emotionClause);
                    }
                } else if (emotionClause) {
                    descriptivePromptParts.push(emotionClause);
                }

                // Part 1.3: Midjourney Descriptive Keywords (Translatable Part)
                // These keywords are part of the main description and should be translated.
                // The untranslatable Midjourney suffix (e.g., --ar) is handled separately later.
                if (outputFormatVal === 'midjourney') {
                    descriptivePromptParts.push("photorealistic style, cinematic lighting, ultra detailed");
                }

                // Part 1.4: Environment Details
                // Assembles various environment details into a coherent phrase.
                let environmentClauses = [];
                if (locationVal && locationVal.trim() !== '') environmentClauses.push(`di ${locationVal.trim()}`);
                if (timeVal && timeVal.trim() !== '') environmentClauses.push(`pada ${timeVal.trim()}`);
                if (seasonVal && seasonVal.trim() !== '') environmentClauses.push(seasonVal.trim());
                if (weatherVal && weatherVal.trim() !== '') environmentClauses.push(`dengan cuaca ${weatherVal.trim()}`);

                if (environmentClauses.length > 0) {
                    descriptivePromptParts.push(environmentClauses.join(' '));
                }

                // Join all descriptive parts to form the main prompt sentence.
                let prompt = descriptivePromptParts.filter(part => part && part.trim() !== '').join(' ').trim();

                // Ensure the descriptive sentence ends with a period if it has content.
                if (prompt && !/[.!?]$/.test(prompt)) {
                    prompt += '.';
                }

                // Add separation for the next block of details.
                prompt += '\n\n';

                // Stage 2: Cinematography Details
                // Appends details about camera movement, angle, focal length, lighting, and color grading.
                // Values are fetched again here for clarity, or could be passed if preferred.
                const cameraMovementVal = getElementValue('cameraMovement', 'dengan pergerakan kamera');
                const cameraAngleVal = getElementValue('cameraAngle', 'dari sudut');
                const focalLengthVal = getElementValue('focalLength', 'dengan lensa');
                const lightingVal = getElementValue('lighting', 'dengan pencahayaan');
                const colorGradingVal = getElementValue('colorGrading', 'dengan gradiasi warna');

                prompt += `Gunakan pergerakan kamera ${cameraMovementVal} dari sudut ${cameraAngleVal} dengan lensa ${focalLengthVal}. `;
                prompt += `Berikan pencahayaan ${lightingVal} dan gradiasi warna ${colorGradingVal}.\n\n`;

                // Stage 3: Audio Details
                // Appends the comprehensive `audioText` (constructed earlier).
                prompt += `${audioText}.\n\n`;

                // Stage 4: Technical Specifications
                const videoQualityVal = getElementValue('videoQuality', 'standar yang jernih');
                prompt += `Spesifikasi teknis: Kualitas ${videoQualityVal}.`;

                // Stage 5: Additional User-Provided Details
                const additionalDetailsVal = getElementValue('additionalDetails', '');
                if (additionalDetailsVal && additionalDetailsVal.trim() !== '') {
                    prompt += `\n\n${additionalDetailsVal.trim()}`;
                }

                // Stage 6: Midjourney Untranslatable Suffix
                // This suffix is not part of the main translatable prompt but is appended at the end.
                let untranslatableSuffix = '';
                if (outputFormatVal === 'midjourney') { // Use outputFormatVal here
                    // Note: The descriptive Midjourney keywords are already in `prompt`.
                    // Here we only define the suffix.
                    untranslatableSuffix = ' --ar 16:9 --v 6.0';
                }

                // `displayIndonesianPrompt` includes the main prompt and the untranslatable suffix.
                const displayIndonesianPrompt = prompt + untranslatableSuffix;


                const generatedPromptDiv = document.getElementById('generatedPrompt');
                const copyButton = document.getElementById('copyButton');
                
                if (!generatedPromptDiv) {
                    throw new Error('Elemen output prompt tidak ditemukan');
                }

                // Show loading state
                generatedPromptDiv.innerHTML = `
                    <div class="flex items-center justify-center p-4">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-calm-green"></div>
                        <span class="ml-2 text-gray-600">Menerjemahkan prompt...</span>
                    </div>
                `;

                // Extract dialogs and sound effects before translation
                // The 'prompt' variable at this stage contains the full descriptive text,
                // including Midjourney keywords if selected, but NOT the untranslatable suffix.
                const dialogRegex = /\[([^\]]+)\]/g;
                const dialogs = [];
                let match;
                while ((match = dialogRegex.exec(prompt)) !== null) { // Use 'prompt' here
                    dialogs.push({
                        original: match[0],
                        text: match[1],
                        // Try to get context more reliably if Audio section exists
                        context: prompt.substring(0, match.index).includes('Audio:') ?
                                 (prompt.substring(0, match.index).split('Audio:')[1]?.trim() || '') :
                                 ''
                    });
                }

                // Replace dialogs with placeholders in `promptForTranslation`
                let promptForTranslation = prompt; // This is the version for translation
                dialogs.forEach((dialog, index) => {
                    promptForTranslation = promptForTranslation.replace(dialog.original, `[DIALOG_${index}]`);
                });

                const translatedPrompt = await promptHandler.translateText(promptForTranslation);

                // Restore dialogs in translated prompt
                let finalTranslatedPrompt = translatedPrompt;
                dialogs.forEach((dialog, index) => {
                    const dialogWithContext = dialog.context ? `${dialog.context}: ${dialog.original}` : dialog.original;
                    finalTranslatedPrompt = finalTranslatedPrompt.replace(`[DIALOG_${index}]`, dialogWithContext);
                });

                // Ensure audio section is properly formatted in the translated prompt if dialogs were complex
                if (finalTranslatedPrompt.includes('Audio:')) {
                    const audioParts = finalTranslatedPrompt.split('Audio:');
                    if (audioParts.length > 1) {
                        const audioContentInTranslated = audioParts[1].trim();
                        // Check if the placeholder replacement might have lost structure
                        if (!audioContentInTranslated.includes('[') && prompt.includes('Audio:') && prompt.split('Audio:')[1].includes('[')) {
                            const originalAudioStructure = prompt.split('Audio:')[1]?.trim() || ''; // Get original audio part from 'prompt'
                            finalTranslatedPrompt = finalTranslatedPrompt.replace(
                                `Audio: ${audioContentInTranslated}`,
                                `Audio: ${originalAudioStructure}` // Restore original structure if needed
                            );
                        }
                    }
                }

                // Append the untranslatable Midjourney suffix AFTER translation
                if (untranslatableSuffix) {
                    finalTranslatedPrompt += untranslatableSuffix;
                }

                // Create output HTML with better formatting
                const outputHTML = `
                    <div class="space-y-4">
                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-3 border-b border-gray-200 dark:border-gray-700 pb-2">Format: <span class="font-semibold">${selectedFormatText}</span></p>
                        <div class="bg-blue-50 dark:bg-sky-900/50 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-sm font-medium text-blue-800 dark:text-sky-300"> Prompt dalam Bahasa Indonesia:</h3>
                                <button type="button" class="copy-btn bg-accent text-white hover:bg-accent/90 transition duration-200 rounded px-3 py-1 text-sm flex items-center gap-1 font-medium" data-text="${displayIndonesianPrompt.replace(/"/g, '&quot;').replace(/\n/g, '\\n')}">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path>
                                    </svg>
                                    <span>Salin</span>
                                </button>
                            </div>
                            <p class="text-gray-800 dark:text-gray-200 whitespace-pre-line">${displayIndonesianPrompt}</p>
                        </div>
                        <div class="bg-green-50 dark:bg-teal-900/50 p-4 rounded-lg">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="text-sm font-medium text-green-800 dark:text-teal-300"> Prompt dalam Bahasa Inggris:</h3>
                                <button type="button" class="copy-btn bg-accent text-white hover:bg-accent/90 transition duration-200 rounded px-3 py-1 text-sm flex items-center gap-1 font-medium" data-text="${finalTranslatedPrompt.replace(/"/g, '&quot;').replace(/\n/g, '\\n')}">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path>
                                    </svg>
                                    <span>Copy</span>
                                </button>
                            </div>
                            <p class="text-gray-800 whitespace-pre-line">${finalTranslatedPrompt}</p>
                        </div>
                    </div>
                `;

                generatedPromptDiv.innerHTML = ''; // Clear previous content
                const contentWrapper = document.createElement('div');
                contentWrapper.className = 'animate-fade-in'; // Apply fade-in animation
                contentWrapper.innerHTML = outputHTML;
                generatedPromptDiv.appendChild(contentWrapper);
                
                setupCopyButtonListeners(); // Call after new content is added

                // Remove the old copy button
                const oldCopyButton = document.getElementById('copyButton');
                if (oldCopyButton) {
                    oldCopyButton.remove();
                }

                // Scroll to generated prompt only on mobile and only when explicitly requested
                if (window.innerWidth < 1024 && shouldScrollToPrompt) {
                    generatedPromptDiv.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }
            } catch (error) {
                console.error('Error generating prompt:', error);
                const generatedPromptDiv = document.getElementById('generatedPrompt');
                if (generatedPromptDiv) {
                    generatedPromptDiv.innerHTML = `
                        <div class="bg-red-50 p-4 rounded-lg">
                            <h3 class="text-sm font-medium text-red-800 mb-2">Error:</h3>
                            <p class="text-gray-800">${error.message}</p>
                        </div>
                    `;
                }
            }
        }

        // Function to setup copy button listeners (Refactored)
        function setupCopyButtonListeners() {
            document.querySelectorAll('.copy-btn').forEach(button => {
                // Remove existing listener to prevent duplicates if this function is called multiple times on same buttons
                // A more robust way would be to use AbortController if needed, but for this scope, simple re-adding is fine
                // if the buttons are truly new. If they are the same buttons, this will add multiple listeners.
                // Assuming these are always new buttons when this is called after innerHTML update.
                button.replaceWith(button.cloneNode(true)); // Simple way to remove listeners is to clone the button
                document.querySelectorAll('.copy-btn').forEach(newButton => { // Re-query for the new buttons
                    if (newButton.getAttribute('data-listener-attached')) return; // Avoid attaching twice to same new button

                    newButton.addEventListener('click', async function() {
                        const text = this.getAttribute('data-text');
                        try {
                            await navigator.clipboard.writeText(text);
                            const span = this.querySelector('span');
                            if (span) {
                                const originalSpanText = span.textContent;
                                const successMessage = (originalSpanText === 'Salin') ? ' Prompt berhasil disalin!' : ' Prompt copied!';

                                span.textContent = successMessage;
                                this.disabled = true;
                                this.classList.remove('text-green-600', 'border-green-400', 'text-red-600', 'border-red-400');
                                setTimeout(() => {
                                    span.textContent = originalSpanText;
                                    this.disabled = false;
                                }, 2000);
                            }
                        } catch (err) {
                            console.error('Failed to copy text: ', err);
                            const span = this.querySelector('span');
                            if (span) {
                                const originalSpanText = span.textContent;
                                if (!originalSpanText.startsWith('')) {
                                     const errorMessage = (originalSpanText === 'Salin' || originalSpanText === ' Prompt berhasil disalin!') ? ' Gagal Salin' : ' Copy Failed';
                                     span.textContent = errorMessage;
                                     this.disabled = true;
                                     this.classList.remove('text-green-600', 'border-green-400', 'text-red-600', 'border-red-400');
                                     setTimeout(() => {
                                         span.textContent = originalSpanText;
                                         this.disabled = false;
                                     }, 2000);
                                }
                            }
                        }
                    });
                    newButton.setAttribute('data-listener-attached', 'true');
                });
            });
        }

        // Function to add event listeners
        function addInputListeners() {
            // Get all form elements
            const formElements = document.querySelectorAll('#promptForm input, #promptForm select, #promptForm textarea');
            
            // Add event listeners to each element
            formElements.forEach(element => {
                if (element.type === 'range') {
                    element.addEventListener('input', function(e) {
                        e.preventDefault(); // Prevent default scrolling
                        updateVolumeDisplay(this.id, this.id + 'Value');
                        generatePrompt();
                    });
                } else {
                    // Add both input and change events for better responsiveness
                    element.addEventListener('input', function(e) {
                        e.preventDefault(); // Prevent default scrolling
                        generatePrompt();
                    });
                    element.addEventListener('change', function(e) {
                        e.preventDefault(); // Prevent default scrolling
                        generatePrompt();
                    });
                    element.addEventListener('keyup', function(e) {
                        e.preventDefault(); // Prevent default scrolling
                        generatePrompt();
                    });
                }
            });

            // Add event listeners for custom inputs
            const customInputs = {
                'dialog': 'customDialogInput',
                'dialogCharacter': 'customDialogCharacterInput',
                'voiceMood': 'customVoiceMoodInput',
                'backgroundMusic': 'customMusicInput',
                'soundEffects': 'customSoundEffectsInput',
                'volume': 'customVolumeInput'
            };

            Object.entries(customInputs).forEach(([selectId, inputId]) => {
                const select = document.getElementById(selectId);
                const input = document.getElementById(inputId);
                if (select && input) {
                    select.addEventListener('change', function(e) {
                        e.preventDefault(); // Prevent default scrolling
                        input.classList.toggle('hidden', this.value !== 'custom');
                        generatePrompt();
                    });
                    // Add event listeners to custom input fields
                    input.addEventListener('input', function(e) {
                        e.preventDefault(); // Prevent default scrolling
                        generatePrompt();
                    });
                    input.addEventListener('change', function(e) {
                        e.preventDefault(); // Prevent default scrolling
                        generatePrompt();
                    });
                    input.addEventListener('keyup', function(e) {
                        e.preventDefault(); // Prevent default scrolling
                        generatePrompt();
                    });
                }
            });

            // Add event listeners for dynamic inputs
            const dialogInputs = document.getElementById('dialogInputs');
            if (dialogInputs) {
                dialogInputs.addEventListener('input', function(e) {
                    e.preventDefault(); // Prevent default scrolling
                    if (e.target.tagName === 'INPUT') {
                        generatePrompt();
                    }
                });
            }

            const soundEffectsInputs = document.getElementById('soundEffectsInputs');
            if (soundEffectsInputs) {
                soundEffectsInputs.addEventListener('input', function(e) {
                    e.preventDefault(); // Prevent default scrolling
                    if (e.target.tagName === 'INPUT') {
                        generatePrompt();
                    }
                });
            }

            // Add event listener for form submission
            const promptForm = document.getElementById('promptForm');
            if (promptForm) {
                promptForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    generatePrompt();
                });
            }

            // Add event listeners for audio mixing and processing toggles
            const showAudioMixing = document.getElementById('showAudioMixing');
            if (showAudioMixing) {
                showAudioMixing.addEventListener('change', function(e) {
                    e.preventDefault(); // Prevent default scrolling
                    const audioMixingContent = document.getElementById('audioMixingContent');
                    if (audioMixingContent) {
                        audioMixingContent.classList.toggle('hidden', !this.checked);
                    }
                    generatePrompt();
                });
            }

            const showAudioProcessing = document.getElementById('showAudioProcessing');
            if (showAudioProcessing) {
                showAudioProcessing.addEventListener('change', function(e) {
                    e.preventDefault(); // Prevent default scrolling
                    const audioProcessingContent = document.getElementById('audioProcessingContent');
                    if (audioProcessingContent) {
                        audioProcessingContent.classList.toggle('hidden', !this.checked);
                    }
                    generatePrompt();
                });
            }
        }

        // Function to add new dialog input
        window.addDialogInput = function() {
            const dialogInputs = document.getElementById('dialogInputs');
            if (dialogInputs) {
                const newDialog = document.createElement('div');
                newDialog.className = 'flex gap-4 items-start';
                newDialog.innerHTML = `
                    <div class="w-1/4">
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dialog-character dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green">
                            ${Array.from(document.querySelectorAll('.dialog-character option')).map(opt => opt.outerHTML).join('')}
                        </select>
                    </div>
                    <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green input-field dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Masukkan dialog...">
                                            <input type="text" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-calm-green dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:hover:border-gray-500 dark:focus:border-calm-green" placeholder="Deskripsikan efek suara...">
                    <button type="button" class="text-red-500 hover:text-red-700" onclick="removeDialog(this)">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                `;
                dialogInputs.appendChild(newDialog);
                
                // Add event listeners to new elements
                const newInput = newDialog.querySelector('input[type="text"]');
                const newSelect = newDialog.querySelector('select');
                
                if (newInput) {
                    newInput.addEventListener('input', generatePrompt);
                    newInput.addEventListener('change', generatePrompt);
                    newInput.addEventListener('keyup', generatePrompt);
                }
                if (newSelect) {
                    newSelect.addEventListener('change', function() {
                        if (this.value === 'custom') {
                            const customName = prompt('Masukkan nama karakter:');
                            if (customName) {
                                const option = document.createElement('option');
                                option.value = customName;
                                option.text = customName;
                                this.appendChild(option);
                                this.value = customName;
                            } else {
                                this.value = 'Karakter 1';
                            }
                        }
                        generatePrompt();
                    });
                }
                
                generatePrompt();
            }
        }

        // Function to add new dialog character
        window.addDialogCharacter = function() {
            const customName = prompt('Masukkan nama karakter baru:');
            if (customName) {
                const characterOptions = document.querySelectorAll('.dialog-character');
                characterOptions.forEach(select => {
                    const option = document.createElement('option');
                    option.value = customName;
                    option.text = customName;
                    select.appendChild(option);
                });
                generatePrompt();
            }
        }

        // Function to remove dialog input
        window.removeDialog = function(button) {
            const dialogInputs = document.getElementById('dialogInputs');
            if (dialogInputs && dialogInputs.children.length > 1) {
                button.parentElement.remove();
                generatePrompt();
            }
        }

        // Function to remove sound effect input
        window.removeSoundEffect = function(button) {
            const soundEffectsInputs = document.getElementById('soundEffectsInputs');
            if (soundEffectsInputs && soundEffectsInputs.children.length > 1) {
                button.parentElement.remove();
                generatePrompt();
            }
        }

        // Initialize when the page loads
        document.addEventListener('DOMContentLoaded', async function() {
                const generatedPromptDiv = document.getElementById('generatedPrompt'); // Get reference here for initial scrollbar setup

                // Function to apply scrollbar theme based on current documentElement class
                function applyScrollbarTheme() {
                    if (generatedPromptDiv) {
                        if (document.documentElement.classList.contains('dark')) {
                            generatedPromptDiv.classList.add('dark-mode-scrollbar');
                        } else {
                            generatedPromptDiv.classList.remove('dark-mode-scrollbar');
                        }
                    }
                }

                applyInitialScrollbarTheme(); // Call the function defined in the head, now that div is available
                                            // Self-correction: applyInitialScrollbarTheme was defined in <head>,
                                            // let's redefine or call applyScrollbarTheme directly.
                applyScrollbarTheme(); // Apply scrollbar theme on initial load based on class in <html>

                // Theme toggle button setup
                const themeToggleBtn = document.getElementById('theme-toggle');
                const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
                const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

                function updateThemeIconsVisibility() {
                    if (document.documentElement.classList.contains('dark')) {
                        themeToggleDarkIcon.classList.remove('hidden');
                        themeToggleLightIcon.classList.add('hidden');
                    } else {
                        themeToggleDarkIcon.classList.add('hidden');
                        themeToggleLightIcon.classList.remove('hidden');
                    }
                    applyScrollbarTheme(); // Update scrollbar on theme toggle
                }

                updateThemeIconsVisibility(); // Initial icon visibility

                themeToggleBtn.addEventListener('click', () => {
                    document.documentElement.classList.toggle('dark');
                    if (document.documentElement.classList.contains('dark')) {
                        localStorage.setItem('color-theme', 'dark');
                    } else {
                        localStorage.setItem('color-theme', 'light');
                    }
                    updateThemeIconsVisibility(); // Update icons and scrollbar
                });

                // Add all event listeners for form inputs
            addInputListeners();
            
            // Set initial volume displays
            updateVolumeDisplay('dialogVolume', 'dialogVolumeValue');
            updateVolumeDisplay('musicVolume', 'musicVolumeValue');
            updateVolumeDisplay('effectsVolume', 'effectsVolumeValue');
            updateVolumeDisplay('overallVolume', 'overallVolumeValue');
            
            // Initialize dropdown translations
            await promptHandler.initializeDropdownTranslations();
            
            // Generate initial prompt with scroll
            window.shouldScrollToPrompt = true;
            generatePrompt(); // This will internally call setupCopyButtonListeners
            window.shouldScrollToPrompt = false;
            
            // Setup character search functionality
            setupCharacterSearch();

            // Initial call for any copy buttons already on the page (though likely none at this stage)
            // and for buttons generated by the main form.
            setupCopyButtonListeners();
        });

        // Add animation to form sections
        document.querySelectorAll('.bg-light\\/50').forEach((section, index) => {
            section.style.animationDelay = `${index * 0.1}s`;
            section.classList.add('animate-fade-in');
        });

        // Add resize handler for responsive behavior
        window.addEventListener('resize', function() {
            const outputSection = document.querySelector('.lg\\:sticky');
            if (outputSection) {
                if (window.innerWidth < 1024) {
                    outputSection.style.position = 'relative';
                } else {
                    outputSection.style.position = 'sticky';
                }
            }
        });

        // Add this to your existing JavaScript
        function setupCharacterSearch() {
            const searchInputs = document.querySelectorAll('.character-search');
            searchInputs.forEach(input => {
                input.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const select = this.nextElementSibling;
                    const options = select.querySelectorAll('option');
                    
                    options.forEach(option => {
                        const text = option.text.toLowerCase();
                        if (text.includes(searchTerm) || option.value === 'custom') {
                            option.style.display = '';
                        } else {
                            option.style.display = 'none';
                        }
                    });
                });
            });
        }
    </script>
</body>
</html>